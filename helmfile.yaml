repositories:
  - name: stable
    url: https://kubernetes-charts.storage.googleapis.com
  - name: kiwigrid
    url: https://kiwigrid.github.io
  - name: jetstack
    url: https://charts.jetstack.io

releases:
  - name: cert-manager
    chart: jetstack/cert-manager
    version: ~0.12.0
    namespace: cert-manager
  - name: goldpinger
    chart: stable/goldpinger
    version: ~2.0.1
  - name: docker-gc
    chart: stable/spotify-docker-gc
    version: 0.3.0
  - name: nginx-ingress
    chart: stable/nginx-ingress
    version: ~1.1.4
    values:
      - controller:
          hostNetwork: true
          dnsPolicy: ClusterFirstWithHostNet
          nodeSelector:
            kubernetes.io/hostname: nimbus
          minAvailable: 0
        defaultBackend:
          minAvailable: 0
        rbac:
          create: true
  - name: home-assistant
    chart: stable/home-assistant
    version: ~0.10.0
    values:
      - values/home-assistant_values.yaml
  - name: media-master
    chart: ./media-master
    version: ~0.3.1
    values:
      - replicaCount: 0
      - values/media-master_values.yaml
  - name: transmission-ovpn
    chart: ./transmission-ovpn
    version: ~0.1.0
    values:
      - values/transmission-ovpn.yaml
  - name: radarr
    chart: ./radarr
    version: ~0.1.0
    values:
      - values/radarr.yaml
  - name: sonarr
    chart: ./sonarr
    version: ~0.1.0
    values:
      - values/sonarr.yaml
  - name: jackett
    chart: ./jackett
    version: ~0.1.0
    values:
      - values/jackett.yaml
  - name: ftb-infinity
    chart: stable/minecraft
    version: ~0.3.2
    values:
      - securityContext:
          # Security context settings
          # ceph's volume provisioner needs to be run as root right now
          runAsUser: 0
        minecraftServer:
          eula: "TRUE"
          type: "FTB"
          version: "1.12.2"
          ftbServerMod: https://www.feed-the-beast.com/projects/ftb-revelation/files/2658240
          jvmOpts: "-Xmx6G -Xms6G"
          serviceType: "NodePort"
        resources:
          requests:
            memory: 6Gi
            cpu: 1
          limits:
            memory: 6Gi
            cpu: 1
        persistence:
          storageClass: cephfs
          dataDir:
            enabled: true
            Size: 20Gi
  - name: wobbling-crab
    chart: ./ombi
    version: ~0.1.0
    values:
      - values/ombi_values.yaml

  - name: solemn-echidna
    chart: ./plex
    version: ~0.3.1
    values:
      - values/plex_values.yaml
  - name: prometheus
    chart: stable/prometheus-operator
    version: ~8.5.3
    values:
      - alertmanager:
          requests:
            memory: 400Mi
          limits:
            memory: 400Mi
        prometheusOperator:
          limits:
            cpu: 200m
            memory: 200Mi
          requests:
            cpu: 100m
            memory: 100Mi
        prometheus:
          prometheusSpec:
            additionalScrapeConfigs:
            - job_name: 'ceph'
              honor_labels: true
              static_configs:
              - targets:  
                - "10.0.0.1:9283"
                - "10.0.0.3:9283"
                labels: {}
            resources:
              requests:
                memory: 1Gi
              limits:
                memory: 1Gi
  - name: metallb
    chart: stable/metallb
    version: ~0.12.0
    values:
    - configInline:
        address-pools:
        - name: default
          protocol: layer2
          addresses:
          - 192.168.1.220-192.168.1.240
      controller:
        resources:
          limits:
            cpu: 100m
            memory: 100Mi
      speaker:
        resources:
          limits:
            cpu: 100m
            memory: 100Mi
        affinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                - key: "kubernetes.io/hostname"
                  operator: In
                  values: ["absis", "leviathan"]
